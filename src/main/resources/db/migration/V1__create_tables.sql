-- V1: Create base tables (Oracle)

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE USUARIO (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOME VARCHAR2(100) NOT NULL,
  EMAIL VARCHAR2(255) NOT NULL,
  SENHA VARCHAR2(255) NOT NULL,
  TIPO VARCHAR2(20) NOT NULL
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE PATIO (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE VAGA (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NUMERO NUMBER(10) NOT NULL,
  STATUS VARCHAR2(20),
  TIPO VARCHAR2(30),
  PATIO_ID NUMBER(19) NOT NULL
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE MOTO (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  MODELO VARCHAR2(50) NOT NULL,
  PLACA VARCHAR2(10),
  CHASSI VARCHAR2(50),
  PROBLEMA_IDENTIFICADO VARCHAR2(255) NOT NULL,
  VAGA_ID NUMBER(19)
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE DEFEITO (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  TIPOS_DEFEITOS VARCHAR2(40) NOT NULL,
  DESCRICAO VARCHAR2(255) NOT NULL,
  MOTO_ID NUMBER(19) NOT NULL
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/

BEGIN EXECUTE IMMEDIATE 'CREATE TABLE ALOCACAO_MOTO (
  ID NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  MOTO_ID NUMBER(19) NOT NULL,
  VAGA_ID NUMBER(19) NOT NULL,
  MECANICO_RESPONSAVEL_ID NUMBER(19),
  DATA_HORA_ALOCACAO TIMESTAMP
)'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -955 THEN RAISE; END IF; END;
/


